#include "tegra194-cti-camera-basler-2cam-header.dtsi"
#include "tegra194-cti-camera-rpi-imx219-2cam-modes-header.dtsi"
#include "tegra194-cti-camera-2cam-base.dtsi"

#define CAM1_PWDN	TEGRA194_MAIN_GPIO(P, 4)
#define CAM2_PWDN	TEGRA194_MAIN_GPIO(P, 5)
#define CAMERA_I2C_MUX_BUS(x) (0x1E + x)



/ {	

	gpio@2200000 {
		camera-control-output-low {
			gpio-hog;
			output-low;
			gpios = <CAM1_PWDN 0 CAM2_PWDN 0>;
			label = "cam1-pwdn","cam2-pwdn";
		};
	};
	
	i2c@3180000 {
		/delete-node/ tca9546@70;
		tca9544@70 {
			compatible = "nxp,pca9544";
			reg = <0x70>;
			#address-cells = <1>;
			#size-cells = <0>;			
			//skip_mux_detect = "yes";
			vif-supply = <&p3509_vdd_1v8_cvb>;
			vcc-supply = <&p3509_vdd_1v8_cvb>;
			vcc_lp = "vcc";

			i2c@0 {
				status = "okay";
				reg = <0>;	
				i2c-mux,deselect-on-exit;
				#address-cells = <1>;
				#size-cells = <0>;				
				
				basler_basler-mcm_a@36 {
					/* Physical dimensions of sensor */
					physical_w = "3.680";
					physical_h = "2.760";
					use_sensor_mode_id = "true";						
					reset-gpios = <&tegra_main_gpio CAM1_PWDN GPIO_ACTIVE_HIGH>;
					/delete-node/ mode0;
					/delete-node/ mode1;
					/delete-node/ mode2;
					/delete-node/ mode3;
					/delete-node/ mode4;
					/delete-node/ mode5;
					ports {
						port@0 {
							endpoint {
								data-lanes = <1 2>;
								clock-lanes = <0>;
								link-frequencies = /bits/ 64 <600000000>;
							};
						};
					};
				};
			};
			
			i2c@1 {
				status = "okay";
				reg = <1>;
				i2c-mux,deselect-on-exit;
				#address-cells = <1>;
				#size-cells = <0>;				
				
				basler_basler-mcm_b@36 {
					/* Physical dimensions of sensor */
					physical_w = "3.680";
					physical_h = "2.760";
					use_sensor_mode_id = "true";						
					reset-gpios = <&tegra_main_gpio CAM2_PWDN GPIO_ACTIVE_HIGH>;
					/delete-node/ mode0;
					/delete-node/ mode1;
					/delete-node/ mode2;
					/delete-node/ mode3;
					/delete-node/ mode4;
					/delete-node/ mode5;
					ports {
						port@0 {
							endpoint {
								data-lanes = <1 2>;
								clock-lanes = <0>;
								link-frequencies = /bits/ 64 <600000000>;
							};
						};
					};
				};
			};
		};
	};
	
	lens_imx219@RBPCV2 {
			min_focus_distance = "0.0";
			hyper_focal = "0.0";
			focal_length = "3.04";
			f_number = "2.0";
			aperture = "0.0";
		};
		
	tcp: tegra-camera-platform {
	
		num_csi_lanes = <4>;
		max_lane_speed = <1500000>;
		min_bits_per_pixel = <10>;
		vi_peak_byte_per_pixel = <2>;
		vi_bw_margin_pct = <25>;
		max_pixel_rate = <240000>;
		isp_peak_byte_per_pixel = <5>;
		isp_bw_margin_pct = <25>;
		
		modules {
			cam_module0: module0 {
				cam_module0_drivernode1: drivernode1 {
						status = "okay";
					};
			};
			cam_module1: module1 {
				cam_module1_drivernode1: drivernode1 {
						status = "okay";
					};
			};
		};	
	};
};
