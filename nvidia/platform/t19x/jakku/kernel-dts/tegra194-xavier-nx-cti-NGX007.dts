#include "tegra194-xavier-nx-cti-base.dtsi"

/{

	nvidia,dtsfilename = "tegra194-xavier-nx-cti-NGX007.dts";

	clocks-init {
		compatible = "nvidia,clocks-config";
		status = "okay";
		disable {
			clocks = <&aon_clks TEGRA194_CLK_PLLAON>,
				<&bpmp_clks TEGRA194_CLK_CAN1>,
				<&bpmp_clks TEGRA194_CLK_CAN2>;
		};
	};
	
	mttcan@c310000 {
		status = "okay";
	};

			
	sdhci@3440000 {
        cd-gpios = <&tegra_aon_gpio TEGRA194_AON_GPIO(CC, 4) 0>;

    };
	
	external-connection {
		//remove the default extcon conenctions
		/delete-node/ extcon@1;
	};

	extcon_cti: extcon_cti {
		#extcon-cells = <1>;
		compatible = "extcon-gpio-states";
		extcon-gpio,name = "VBUS_ID";
	   
		//VBusDetect and OTG ID
		gpios = <&tegra_main_gpio TEGRA194_MAIN_GPIO(Z, 1) 0  
				 &tegra_main_gpio TEGRA194_MAIN_GPIO(Q, 1) 0>;

		extcon-gpio,cable-states = <0x0 EXTCON_USB_HOST
									0x1 EXTCON_USB_HOST
									0x2 EXTCON_NONE
									0x3 EXTCON_USB>;
		extcon-gpio,wait-for-gpio-scan = <0>;
		extcon-gpio,out-cable-names = <EXTCON_USB EXTCON_USB_HOST EXTCON_NONE>;
		status = "okay";
	};

   pwm_fan_shared_data: pfsd
   {
        tach_gpio = <&tegra_main_gpio TEGRA194_MAIN_GPIO(Q, 2) GPIO_ACTIVE_LOW>;
        pwm_gpio = <&tegra_main_gpio TEGRA194_MAIN_GPIO(H, 1) GPIO_ACTIVE_LOW>;
   };


    xhci@3610000{
        extcon-cable-names = "id";
        extcon-cables = <&extcon_cti 1>;
        status = "okay";
		phys = <&{/xusb_padctl@3520000/pads/usb2/lanes/usb2-0}>,
			<&{/xusb_padctl@3520000/pads/usb2/lanes/usb2-1}>,
			<&{/xusb_padctl@3520000/pads/usb2/lanes/usb2-2}>,
			<&{/xusb_padctl@3520000/pads/usb3/lanes/usb3-2}>;
		phy-names = "usb2-0", "usb2-1", "usb2-2", "usb3-2";
    };

    tegra_xudc: xudc@3550000{
        extcon-cables = <&extcon_cti 0>;
        status = "okay";
        phys =  <&{/xusb_padctl@3520000/pads/usb2/lanes/usb2-0}>, 
                <&{/xusb_padctl@3520000/pads/usb3/lanes/usb3-2}>;
        phy-names = "usb2", "usb3";  

    };

    fixed-regulators{
        regulator@200 {
            compatible = "regulator-fixed";
            regulator-name = "cti-usb-vbus";
            regulator-min-microvolt = <5000000>;
            regulator-max-microvolt = <5000000>;
            gpio = <&tegra_main_gpio TEGRA194_MAIN_GPIO(S, 4) 0>; //GPIO09
            enable-active-high;
            regulator-boot-on;
			regulator-always-on;
        };

    };
	
	xusb_padctl@3520000 {
		pads {
			usb2 {
				lanes {
					usb2-0 {
						nvidia,function = "xusb";
						status = "okay";
					};
					usb2-1 {
						nvidia,function = "xusb";
						status = "okay";
					};
					usb2-2 {
						nvidia,function = "xusb";
						status = "okay";
					};
				};
			};
			usb3 {
				lanes {
					usb3-2 {
						nvidia,function = "xusb";
						status = "okay";
					};
				};
			};
		};
        ports {
            usb2-0 {
                status = "okay";
                vbus-supply = <&cti_usb_vbus>;
                mode = "otg";
            };
            usb2-1 {
                status = "okay";
                mode = "host";
            };
            usb2-2 {
                status = "okay";
                mode = "host";
            };
            usb3-2 {
                status = "okay";
                nvidia,usb2-companion = <0>;
				//vbus-supply = <&cti_usb_vbus>;
            };
        };
	};
	
	spi@3230000{/*SPI3*/
		status = "okay";
		compatible = "nvidia,tegra186-spi";
		spi@0{
			compatible = "tegra-spidev";
			reg=<0>;
			spi-max-frequency = <65000000>;
				controller-data{
				nvidia,enable-hw-based-cs;
			};
		};

	};

	spi@3210000{/*SPI1*/
		status = "okay";
		compatible = "nvidia,tegra186-spi";
		spi@0 {
			compatible = "tegra-spidev";
			reg = <0x0>;
			spi-max-frequency = <65000000>;
				controller-data{
				nvidia,enable-hw-based-cs;
			};
		};
	};
	
	i2c@31e0000 {
		gpio_i2c_8_74: gpio@74 {
					status = "okay";
					compatible = "ti,tca9539";
					reg = <0x74>;
					gpio-controller;
					#gpio-cells = <2>;
					#address-cells = <1>;
					#size-cells = <0>;
					vcc-supply = <&battery_reg>;
		};
	};


};
